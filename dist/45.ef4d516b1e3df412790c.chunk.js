webpackJsonp([45],{1058:function(t,e,a){var i=a(1059);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(20)("d0983f1e",i,!1)},1059:function(t,e,a){e=t.exports=a(19)(void 0),e.push([t.i,'\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-left-50 {\n  margin-left: 50px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.margin-right-20 {\n  margin-right: 20px;\n}\n.padding-bottom-10 {\n  padding-bottom: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.clearfix:after {\n  content: ".";\n  clear: both;\n  display: block;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n.clearfix {\n  zoom: 1;\n}\n.fl {\n  float: left;\n}\n.fr {\n  float: right;\n}\n.file {\n  position: relative;\n  display: inline-block;\n  background: #D0EEFF;\n  border: 1px solid #99D3F5;\n  border-radius: 4px;\n  padding: 4px 12px;\n  overflow: hidden;\n  color: #1E88C7;\n  text-decoration: none;\n  text-indent: 0;\n  line-height: 20px;\n}\n.file input {\n  position: absolute;\n  font-size: 100px;\n  right: 0;\n  top: 0;\n  opacity: 0;\n}\n.file:hover {\n  background: #AADFFD;\n  border-color: #78C3F3;\n  color: #004974;\n  text-decoration: none;\n}\n.my-upload div table tr {\n  font-size: 12px;\n}\n.greyCol {\n  color: #999;\n}\n.expand-row {\n  margin-bottom: 16px;\n  margin-top: 16px;\n  font-size: 12px;\n}\ntextarea.ivu-input {\n  font-size: 12px;\n}\n.soltTitlel {\n  line-height: 2;\n  padding: 0 16px;\n  margin-left: -16px;\n  margin-right: -19px;\n  font-weight: 900;\n  color: #464c5b;\n}\n.titleP {\n  display: inline-block;\n  width: 100%;\n  line-height: 20px;\n  font-size: 14px;\n  color: #1c2438;\n  font-weight: 700;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.soltTitle {\n  line-height: 1;\n  border-bottom: 1px solid #e3e8ee;\n  padding: 17px 16px;\n  margin-left: -16px;\n  margin-right: -19px;\n  font-weight: 900;\n  color: #464c5b;\n}\n',""])},1060:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-position":"top"}},[a("Card",{staticClass:"margin-bottom-10",attrs:{bordered:!1}},[a("Row",[a("Col",{attrs:{span:"8"}},[a("p",{staticClass:"soltTitlel"},[t._v(t._s(t.typeSelect?"新建验收单":"编辑验收单"))])]),t._v(" "),a("Col",{attrs:{span:"5",offset:"11"}},[a("Button",{attrs:{type:"primary",loading:t.BtnLoading},on:{click:function(e){t.saveFn("formValidate")}}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.BtnLoading},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存并提交")]),t._v(" "),a("Button",{attrs:{type:"ghost",loading:t.BtnLoading},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("取消")])],1)],1)],1),t._v(" "),a("Card",{staticClass:"margin-bottom-10",attrs:{bordered:!1}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"flag"}}),t._v(" 基本信息")],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"到货验收单",prop:"contractName"}},[a("Input",{attrs:{readonly:"",disabled:t.workDisabled,icon:"plus-round",placeholder:"到货验收单"},on:{"on-focus":function(e){t.arrivalMsg()}},model:{value:t.formValidate.contractName,callback:function(e){t.$set(t.formValidate,"contractName",e)},expression:"formValidate.contractName"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("FormItem",{attrs:{label:"订单编号"}},[a("Input",{attrs:{placeholder:"订单编号",disabled:""},model:{value:t.formValidate.contractCode,callback:function(e){t.$set(t.formValidate,"contractCode",e)},expression:"formValidate.contractCode"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"订单名称"}},[a("Input",{attrs:{placeholder:"订单名称",disabled:""},model:{value:t.formValidate.contractName,callback:function(e){t.$set(t.formValidate,"contractName",e)},expression:"formValidate.contractName"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("FormItem",{attrs:{label:"采购商名称"}},[a("Input",{attrs:{placeholder:"采购商名称",disabled:""},model:{value:t.formValidate.demanderName,callback:function(e){t.$set(t.formValidate,"demanderName",e)},expression:"formValidate.demanderName"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"供应商名称"}},[a("Input",{attrs:{placeholder:"供应商名称",disabled:""},model:{value:t.formValidate.relativeName,callback:function(e){t.$set(t.formValidate,"relativeName",e)},expression:"formValidate.relativeName"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("FormItem",{attrs:{label:"供应商订单承办人"}},[a("Input",{attrs:{placeholder:"供应商订单承办人",disabled:""},model:{value:t.formValidate.director,callback:function(e){t.$set(t.formValidate,"director",e)},expression:"formValidate.director"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"验收通知方"}},[a("Input",{attrs:{placeholder:"验收通知方",disabled:""},model:{value:t.formValidate.notice,callback:function(e){t.$set(t.formValidate,"notice",e)},expression:"formValidate.notice"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("FormItem",{attrs:{label:"验收人"}},[a("Input",{attrs:{placeholder:"验收人",disabled:""},model:{value:t.formValidate.checker,callback:function(e){t.$set(t.formValidate,"checker",e)},expression:"formValidate.checker"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"验收意见"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},maxlength:255,placeholder:"验收意见255个字以内"},model:{value:t.formValidate.checkOpinion,callback:function(e){t.$set(t.formValidate,"checkOpinion",e)},expression:"formValidate.checkOpinion"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("p",{staticClass:"soltTitle margin-bottom-10"},[a("Icon",{attrs:{type:"flag"}}),t._v(" 附件")],1)]),t._v(" "),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"my-upload"},[a("a",{staticClass:"file",attrs:{href:"javascript:;",disabled:t.flieDisabled},on:{change:function(e){t.upFile(e)}}},[t._v("选择文件\n                            "),a("input",{attrs:{type:"file",name:"",id:""}})]),t._v(" "),a("div",[a("table",t._l(t.filesList,function(e,i){return a("tr",[a("td",{staticStyle:{padding:"0 10px"}},[t._v(t._s(i+1))]),t._v(" "),a("td",{staticStyle:{padding:"0 10px"}},[t._v(t._s(e.name))]),t._v(" "),a("td",{staticStyle:{padding:"0 10px"}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.delFile(i)}}},[t._v("删除")])])])}))])])])],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("p",{staticClass:"soltTitle margin-bottom-10"},[a("Icon",{attrs:{type:"flag"}}),t._v("验收明细\n                        "),a("a",{staticClass:"fr",attrs:{href:"javascript:;"},on:{click:function(e){t.addContractDetailMd()}}},[a("Icon",{attrs:{type:"plus"}}),t._v(" 添加")],1),t._v(" "),a("a",{staticClass:"fr margin-right-20",attrs:{href:"javascript:;"},on:{click:function(e){t.deleteFn()}}},[a("Icon",{attrs:{type:"trash-a"}}),t._v(" 删除")],1)],1)]),t._v(" "),a("Col",{attrs:{span:"24"}},[a("Table",{ref:"selection",attrs:{size:"small",height:"200",border:"",columns:t.columnsZd,data:t.detailedData},on:{"on-selection-change":t.onSelectChange2}})],1)],1)],1)],1),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,title:"到货信息",width:"50%"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.contractInfoMd,callback:function(e){t.contractInfoMd=e},expression:"contractInfoMd"}},[a("div",{staticStyle:{width:"90%"},attrs:{slot:"header"},slot:"header"},[a("Row",[a("Col",{attrs:{span:8}},[a("Input",{attrs:{icon:"ios-search",placeholder:"到货验收单号/采购商名称/到货日期/订单编号"},on:{input:function(e){t.searchFn()}},model:{value:t.contractSearch,callback:function(e){t.contractSearch=e},expression:"contractSearch"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"contant"},[a("Table",{attrs:{loading:t.loading,columns:t.columnsCt,data:t.dataCt,height:"329","highlight-row":""},on:{"on-current-change":t.radioFn}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.modal_loading},on:{click:t.nextMd}},[t._v("下一步")]),t._v(" "),a("Button",{attrs:{type:"ghost",loading:t.modal_loading},on:{click:function(e){t.contractInfoMd=!1}}},[t._v("取消")])],1)]),t._v(" "),a("Modal",{attrs:{title:"到货明细",width:"50%"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.contractDetailMd,callback:function(e){t.contractDetailMd=e},expression:"contractDetailMd"}},[a("div",{staticStyle:{width:"90%"},attrs:{slot:"header"},slot:"header"},[a("Row",[a("Col",{attrs:{span:8}},[a("Input",{attrs:{icon:"ios-search",placeholder:"物资名称"},on:{input:function(e){t.searchFn2()}},model:{value:t.contractSearch2,callback:function(e){t.contractSearch2=e},expression:"contractSearch2"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"contant"},[a("Table",{ref:"selection",attrs:{columns:t.columnsMx,data:t.dataMx,height:"300"},on:{"on-selection-change":t.onSelectChange}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.modal_loading},on:{click:t.prevMd}},[t._v("上一步")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.modal_loading},on:{click:function(e){t.confirmTemporary()}}},[t._v("确认")]),t._v(" "),a("Button",{attrs:{type:"ghost",loading:t.modal_loading},on:{click:function(e){t.contractDetailMd=!1}}},[t._v("关闭")])],1)]),t._v(" "),a("Modal",{attrs:{title:"到货明细",width:"50%"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.contractDetailMdAdd,callback:function(e){t.contractDetailMdAdd=e},expression:"contractDetailMdAdd"}},[a("div",{staticStyle:{width:"90%"},attrs:{slot:"header"},slot:"header"},[a("Row",[a("Col",{attrs:{span:8}},[a("Input",{attrs:{icon:"ios-search",placeholder:"物资名称"},on:{input:function(e){t.searchFn3()}},model:{value:t.contractSearch3,callback:function(e){t.contractSearch3=e},expression:"contractSearch3"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"contant"},[a("Table",{ref:"selection",attrs:{columns:t.columnsMx,data:t.zcData,height:"300"},on:{"on-selection-change":t.onSelectChange}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.modal_loading},on:{click:function(e){t.confirmTemporary2()}}},[t._v("确认")]),t._v(" "),a("Button",{attrs:{type:"ghost",loading:t.modal_loading},on:{click:function(e){t.contractDetailMdAdd=!1}}},[t._v("关闭")])],1)])],1)},l=[];i._withStripped=!0;var n={render:i,staticRenderFns:l};e.default=n},296:function(t,e,a){"use strict";function i(t){s||a(1058)}Object.defineProperty(e,"__esModule",{value:!0});var l=a(575),n=a.n(l);for(var r in l)"default"!==r&&function(t){a.d(e,t,function(){return l[t]})}(r);var o=a(1060),c=a.n(o),s=!1,d=a(4),h=i,f=d(n.a,c.a,!1,h,null,null);f.options.__file="src/views/check/acceptance/newAcceptance.vue",e.default=f.exports},575:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=a(39),n=i(l),r=a(15),o=i(r);e.default={name:"",data:function(){var t=this;return{billId:"",contractInfoMd:!1,contractDetailMd:!1,contractDetailMdAdd:!1,modal_loading:!1,loading:!0,BtnLoading:!1,contractSearch:"",contractSearch2:"",contractSearch3:"",formValidate:{contractId:"",contractCode:"",contractName:"",orderNo:"",demanderName:"",relativeName:"",notice:"",director:"",dispatchBillNo:"",dispatchBillId:"",arrivalCheckBillNo:"",checker:"",confirmUserName:"",checkOpinion:"",factory:""},ruleValidate:{contractName:[{required:!0,message:"Mailbox cannot be empty",trigger:"change"}]},columnsMx:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"序号",type:"index",width:80,align:"center"},{title:"物资名称",key:"materialName",align:"center",width:150},{title:"材料规格型号",key:"spectype",align:"center",width:150},{title:"图号",key:"figureNo",align:"center",width:150},{title:"单位",key:"measureUnit",align:"center",width:150},{title:"订单数量",key:"needQuantity",align:"center",width:150},{title:"累计验收数量",key:"checkedQuantity",align:"center",width:150},{title:"到货数量",key:"arrivalNum",align:"center",width:150},{title:"可验收数量",key:"checkQuantity",align:"center",width:150}],dataMx:[],temporaryData:[],detailedData:[],columnsCt:[{type:"index",title:"序号",width:60},{title:"到货验收单号",width:150,align:"center",key:"arrivalCheckBillNo"},{title:"采购商名称",width:200,align:"center",key:"demanderName"},{title:"到货日期",align:"center",key:"updateDate",render:function(t,e){return t("span",o.default.format(e.row.updateDate))}},{title:"订单编号",align:"center",key:"contractCode"},{title:"订单名称",align:"center",key:"contractName"}],dataCt:[],columnsZd:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"序号",type:"index",width:80,align:"center"},{title:"物资名称",key:"materialName",align:"center",width:200},{title:"材料规格型号",key:"spectype",align:"center",width:150},{title:"图号",key:"figureNo",align:"center",width:150},{title:"单位",key:"measureUnit",align:"center",width:200},{title:"订单数量",key:"needQuantity",align:"center",width:150},{title:"累计验收数量",key:"checkedQuantity",align:"center",width:150},{title:"到货数量",key:"arrivalNum",align:"center",width:150},{title:"本次验收数量",key:"checkQuantity",align:"center",width:150,fixed:"right",render:function(e,a){return e("span",[e("InputNumber",{props:{value:a.row.checkQuantity,size:"small",max:a.row.checkQuantity1,min:1,step:1.2},on:{"on-change":function(t){a.row.checkQuantity=t},"on-blur":function(){t.detailedData[a.index].checkQuantity=a.row.checkQuantity,console.log(t.detailedData[a.index].checkQuantity)}}})])}}],zcData:[],deleteArr:[],file:"",list:[],filesList:[],flieDisabled:!1,workDisabled:!1,typeSelect:!0}},methods:{init:function(){},ok:function(){},cancel:function(){this.onlineOrderMd=!1},arrivalMsg:function(){var t=this;this.contractInfoMd=!0,this.$httpServer("/checkOfGoods/selectCheckOfGoodsList.do",{inputParam:this.contractSearch}).then(function(e){console.log(e),t.loading=!1,200==e.status&&(t.dataCt=e.result.checkList,t.formValidate.relativeName=e.result.relativeName,t.formValidate.confirmUserName=e.result.confirmUserName,t.formValidate.checker=e.result.checker)})},searchFn:function(){this.arrivalMsg()},searchFn2:function(){var t=this;this.$httpServer("/checkOfGoods/selectArrivalCheckBillItem.do",{arrivalCheckBillNo:this.formValidate.arrivalCheckBillNo,inputParam:this.contractSearch2}).then(function(e){console.log(e),200==e.status&&(t.dataMx=e.result)})},searchFn3:function(){for(var t=this,e=[],a=0;a<this.detailedData.length;a++)e.push(this.detailedData[a].dispatchBillItemId);this.contractDetailMdAdd=!0,this.$httpServer("/checkOfGoods/selectedItemReturn.do",{dispatchBillItemId:(0,n.default)(e),billId:this.formValidate.arrivalCheckBillId,inputParam:this.contractSearch3}).then(function(e){console.log(e),200==e.status&&(t.zcData=e.result.arrivalCheckBillItemList)})},radioFn:function(t,e){console.log(t),this.formValidate.contractId=t.contractId,this.formValidate.contractCode=t.contractCode,this.formValidate.contractName=t.contractName,this.formValidate.orderNo=t.orderNo,this.formValidate.demanderName=t.demanderName,this.formValidate.director=t.director,this.formValidate.dispatchBillNo=t.dispatchBillNo,this.formValidate.arrivalCheckBillNo=t.arrivalCheckBillNo,this.formValidate.arrivalCheckBillId=t.arrivalCheckBillId,this.noticeFn()},nextMd:function(){var t=this;""==this.formValidate.arrivalCheckBillNo?this.$Message.info("请选择到货单"):(this.contractInfoMd=!1,this.contractDetailMd=!0,this.$httpServer("/checkOfGoods/selectArrivalCheckBillItem.do",{arrivalCheckBillNo:this.formValidate.arrivalCheckBillNo,inputParam:this.contractSearch2}).then(function(e){console.log(e),200==e.status&&(t.dataMx=e.result)}))},prevMd:function(){this.contractInfoMd=!0,this.contractDetailMd=!1},upFile:function(t){t.target.outerHTML=t.target.outerHTML,this.file=t.target.files[0];var e=t.target.files,a=[];Array.prototype.push.apply(a,e);for(var i=0;i<a.length;i++)this.filesList.push(a[i])},delFile:function(t){var e=this;null==this.filesList[t].id?this.filesList.splice(t,1):this.$httpServer("/checkOfGoods/deleteFile.do",{fileId:this.filesList[t].id}).then(function(a){console.log(a),e.filesList.splice(t,1)})},noticeFn:function(){var t=this;this.$httpServer("/arrivalOfGoods/arrivalCheckNoticeMan.do",{contractId:this.formValidate.contractId}).then(function(e){var a=[];if(200==e.status)for(var i=0;i<e.result.length;i++)a.push(e.result[i].loginName);t.formValidate.notice=a.join(" / ")})},onSelectChange:function(t){console.log(t),this.temporaryData=t},onSelectChange2:function(t){console.log(t),this.deleteArr=t},confirmTemporary:function(){if(0!=this.temporaryData.length){this.detailedData=[];for(var t=0;t<this.temporaryData.length;t++)this.detailedData.push(this.temporaryData[t]);this.contractDetailMd=!1}else this.$Message.info("未选择明细")},confirmTemporary2:function(){if(0!=this.temporaryData.length){for(var t=0;t<this.temporaryData.length;t++)this.detailedData.push(this.temporaryData[t]);this.contractDetailMdAdd=!1,this.deleteArr=[]}else this.$Message.info("未选择明细")},addContractDetailMd:function(){var t=this,e=[];this.temporaryData=[];for(var a=0;a<this.detailedData.length;a++)e.push(this.detailedData[a].dispatchBillItemId);this.contractDetailMdAdd=!0,this.$httpServer("/checkOfGoods/selectedItemReturn.do",{dispatchBillItemId:(0,n.default)(e),billId:this.formValidate.arrivalCheckBillId}).then(function(e){console.log(e),200==e.status&&(t.zcData=e.result.arrivalCheckBillItemList)})},deleteFn:function(){0==this.deleteArr.length&&this.$Message.warning("请选择要删除的明细");for(var t=0;t<this.deleteArr.length;t++)for(var e=0;e<this.detailedData.length;e++)this.detailedData[e].id==this.deleteArr[t].id&&this.detailedData.splice(e,1);this.deleteArr=[]},handleSubmit:function(t){var e=this;this.BtnLoading=!0,this.$refs[t].validate(function(t){if(t){var a=new FormData;if(a.append("arrivalCheckBillJsonStr",(0,n.default)(e.formValidate)),e.detailedData.length<=0)return e.$Message.info("请选择明细"),void(e.BtnLoading=!1);a.append("arrivalCheckBillItemJsonStr",(0,n.default)(e.detailedData));for(var i=0;i<e.filesList.length;i++)a.append("files",e.filesList[i]);e.$fdServer("/checkOfGoods/submitArrivalCheckBill.do",a).then(function(t){console.log(t),200==t.status?(e.$Message.success("保存成功"),e.BtnLoading=!1,e.$router.push({name:"acceptance"})):(e.$Message.error("保存失败"),e.BtnLoading=!1)})}else e.$Message.error("失败!"),e.BtnLoading=!1})},handleReset:function(t){this.$refs[t].resetFields(),this.backlist()},saveFn:function(t){var e=this;this.BtnLoading=!0,this.$refs[t].validate(function(t){if(t){var a=new FormData;if(a.append("arrivalCheckBillJsonStr",(0,n.default)(e.formValidate)),e.detailedData.length<=0)return e.$Message.info("请选择明细"),void(e.BtnLoading=!1);a.append("arrivalCheckBillItemJsonStr",(0,n.default)(e.detailedData));for(var i=0;i<e.filesList.length;i++)a.append("files",e.filesList[i]);var l="";l=void 0!=e.$route.query.arrivalCheckBillId?"/checkOfGoods/updateArrivalCheckBill.do":"/checkOfGoods/saveArrivalCheckBill.do",e.$fdServer(l,a).then(function(t){console.log(t),200==t.status?(e.$Message.success("保存成功"),e.BtnLoading=!1,e.$router.push({name:"acceptance"})):(e.$Message.error("保存失败"),e.BtnLoading=!1)})}else e.$Message.error("失败!"),e.BtnLoading=!1})},backlist:function(){this.$router.go(-1)},getDetailData:function(){var t=this;this.$httpServer("/checkOfGoods/getArrivalCheckBill.do",{billId:this.billId}).then(function(e){console.log(e),200==e.status&&(t.formValidate.contractId=e.result.arrivalCheckBill.contractId,t.formValidate.contractCode=e.result.arrivalCheckBill.contractCode,t.formValidate.contractName=e.result.arrivalCheckBill.contractName,t.formValidate.orderNo=e.result.arrivalCheckBill.orderNo,t.formValidate.demanderName=e.result.arrivalCheckBill.demanderName,t.formValidate.relativeName=e.result.arrivalCheckBill.relativeName,t.formValidate.notice=e.result.arrivalCheckBill.notice,t.formValidate.director=e.result.arrivalCheckBill.director,t.formValidate.dispatchBillNo=e.result.arrivalCheckBill.dispatchBillNo,t.formValidate.checker=e.result.arrivalCheckBill.checker,t.formValidate.confirmUserName=e.result.arrivalCheckBill.confirmUserName,t.formValidate.checkOpinion=e.result.arrivalCheckBill.checkOpinion,t.formValidate.arrivalCheckBillId=e.result.arrivalCheckBill.arrivalCheckBillId,t.formValidate.arrivalCheckBillNo=e.result.arrivalCheckBill.arrivalCheckBillNo)})},getDetailFile:function(){var t=this;this.$httpServer("/checkOfGoods/getArrivalCheckBillFile.do",{billId:this.billId}).then(function(e){console.log(e),200==e.status&&(t.filesList=e.result.attachs)})},getDetailMx:function(){var t=this;this.$httpServer("/checkOfGoods/getArrivalCheckBillItem.do",{billId:this.billId}).then(function(e){console.log(e),200==e.status&&(t.detailedData=e.result.arrivalCheckBillItems)})},getWorkbench:function(t,e){var a=this;this.$httpServer("/workTable/confirmCheckBill.do",{billId:t,billNo:e}).then(function(t){200==t.status&&(a.formValidate.contractId=t.result.arrivalCheckBill.contractId,a.formValidate.contractCode=t.result.arrivalCheckBill.contractCode,a.formValidate.contractName=t.result.arrivalCheckBill.contractName,a.formValidate.orderNo=t.result.arrivalCheckBill.orderNo,a.formValidate.demanderName=t.result.arrivalCheckBill.demanderName,a.formValidate.relativeName=t.result.arrivalCheckBill.relativeName,a.formValidate.notice=t.result.arrivalCheckBill.notice,a.formValidate.director=t.result.arrivalCheckBill.director,a.formValidate.dispatchBillNo=t.result.arrivalCheckBill.dispatchBillNo,a.formValidate.checker=t.result.checker,a.formValidate.confirmUserName=t.result.arrivalCheckBill.confirmUserName,a.formValidate.arrivalCheckBillId=t.result.arrivalCheckBill.arrivalCheckBillId,a.formValidate.arrivalCheckBillNo=t.result.arrivalCheckBill.arrivalCheckBillNo,a.noticeFn(),a.workDisabled=!0,a.detailedData=t.result.arriCheckbillItemList)})}},mounted:function(){void 0==this.$route.query.arrivalCheckBillNo?(this.billId=this.$route.query.arrivalCheckBillId.toString(),this.getDetailData(),this.getDetailFile(),this.getDetailMx(),this.typeSelect=!1):void 0!=this.$route.query.arrivalCheckBillNo&&this.getWorkbench(this.$route.query.arrivalCheckBillId,this.$route.query.arrivalCheckBillNo)},watch:{filesList:function(t){t.length>=5?this.flieDisabled=!0:this.flieDisabled=!1},contractInfoMd:function(t){0==t&&(this.contractSearch="")}}}}});