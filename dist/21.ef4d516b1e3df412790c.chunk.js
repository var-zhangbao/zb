webpackJsonp([21],{1127:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",[a("Row",{staticClass:"clearfix"},[a("Col",{attrs:{span:"4"}},[a("span",{staticStyle:{"padding-right":"10px"}},[e._v("场景")]),e._v(" "),a("Select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{"on-change":e.changeScene},model:{value:e.selectedScene,callback:function(t){e.selectedScene=t},expression:"selectedScene"}},e._l(e.sceneList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("Col",{attrs:{span:"8",offset:"4"}},[a("AutoComplete",{staticStyle:{width:"300px",float:"left"},attrs:{icon:"ios-search",placeholder:"付款申请单/采购商名称/订单名称/申请金额"},on:{"on-search":e.searchPayment},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1),e._v(" "),a("div",{staticClass:"clearfix margin-top-10"},[a("Table",{staticStyle:{width:"100%",float:"left"},attrs:{size:"small",stripe:"",columns:e.payMentColumns,data:e.payMentData,loading:e.loadingMorn},on:{"on-sort-change":e.sort}}),e._v(" "),a("Page",{staticClass:"margin-top-10 fr",attrs:{total:e.totalPage,size:"small","show-elevator":"","show-sizer":""},on:{"on-change":e.changeSize,"on-page-size-change":e.changePagesize}})],1)],1)],1)],1)],1)},s=[];n._withStripped=!0;var i={render:n,staticRenderFns:s};t.default=i},310:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(597),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var l=a(1127),o=a.n(l),r=a(4),c=r(s.a,o.a,!1,null,null,null);c.options.__file="src/views/workbench/workbenchFK.vue",t.default=c.exports},349:function(e,t,a){"use strict";t.__esModule=!0;var n=a(350),s=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,a){return t in e?(0,s.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},350:function(e,t,a){e.exports={default:a(351),__esModule:!0}},351:function(e,t,a){a(352);var n=a(0).Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},352:function(e,t,a){var n=a(9);n(n.S+n.F*!a(11),"Object",{defineProperty:a(10).f})},597:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(349),i=n(s),l=a(6),o=n(l),r=a(15),c=n(r);t.default={name:"",data:function(){var e,t=this;return e={sceneList:[{value:"0",label:"待处理"},{value:"1",label:"已处理"}],selectedScene:"0",searchValue:"",showBtn:!1,payMentColumns:[{type:"index",title:"序号",width:60},{title:"付款申请单号",key:"payBillNo",sortable:!0,render:function(e,a){return e("span",[e("a",{style:{},on:{click:function(){t.lookDetail(a.row.payBillId)}}},a.row.payBillNo)])}},{title:"采购商名称",key:"purchaserName",sortable:!0},{title:"订单编号",key:"contractCode"},{title:"申请金额",key:"applyMoney",sortable:!0},{title:"状态",key:"state",width:100,render:function(e,t){switch(t.row.state){case"0":return e("span","待提交");case"1":return e("span","已提交");case"2":return e("span","已确认");case"3":return e("span","已驳回")}}},{title:"操作",key:"caozuo",render:function(e,a){if("1"==t.userType)switch(a.row.state){case"0":return e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.submitPayMent(a.row.payBillId)}}},"提交"),e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.editPayMent(a.row.payBillId)}}},"维护"),e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.deletePayMent(a.row.payBillId)}}},"删除")]);case"1":case"2":return e("div",[]);case"3":return e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.submitPayMent(a.row.payBillId)}}},"提交"),e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.editPayMent(a.row.payBillId)}}},"维护"),e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.deletePayMent(a.row.payBillId)}}},"删除")])}else if("0"==t.userType)switch(a.row.state){case"0":return e("div",[]);case"1":return e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.surePayMent(a.row.payBillId)}}},"确认"),e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.rejectPayMent(a.row.payBillId)}}},"驳回")]);case"2":case"3":return e("div",[])}}}],payMentData:[],totalPage:1,loadingMorn:!1},(0,i.default)(e,"showBtn",!1),(0,i.default)(e,"userType",""),(0,i.default)(e,"pageIndex",1),(0,i.default)(e,"pageSize",10),(0,i.default)(e,"para",{}),e},mounted:function(){var e=JSON.parse(o.default.get("userData"));this.userType=e.userType,"1"===this.userType?this.showBtn=!1:this.showBtn=!0,c.default.isEmptyObject(this.$route.query.content)||(this.searchValue=this.$route.query.content.deliveryBillNo),this.getPayMentList()},methods:{searchPayment:function(e){this.searchValue=e,this.getPayMentList()},primary:function(){var e={payment_State:1001};this.$router.push({name:"paymentaddedit_index",query:e})},lookDetail:function(e){var t={payBillId:e};this.$router.push({name:"paymentdetail_index",query:t})},getPayMentList:function(e){var t=this;if(e){var a="";a="asc"==e.order?"2":"1";var n="";switch(e.column.title){case"付款申请单号":n=1;break;case"采购商名称":n=2;break;case"申请金额":n=3}this.para={pageIndex:this.pageIndex,pageSize:this.pageSize,input:this.searchValue,orderParam:n,orderFlag:a,flag:this.selectedScene}}else this.para={pageIndex:this.pageIndex,pageSize:this.pageSize,input:this.searchValue,flag:this.selectedScene};this.$httpServer("/workTable/getPayApplyList.do",this.para).then(function(e){console.log(e),t.payMentData=e.data.list,t.totalPage=e.data.totalCount})},sort:function(e){console.log(e),this.getPayMentList(e)},changeSize:function(e){this.pageIndex=e,this.getContractList()},changePagesize:function(e){this.pageSize=e,this.getContractList()},submitPayMent:function(e){var t=this,a={payBillId:e};this.$httpServer("/payApply/submit.do",a).then(function(e){console.log(e),200==e.status&&(t.$Message.success("付款申请单已提交"),t.getPayMentList())})},surePayMent:function(e){var t=this,a={payBillId:e};this.$httpServer("/payApply/confirm.do",a).then(function(e){console.log(e),200==e.status&&(t.$Message.success("付款申请单已确认"),t.searchValue="",t.getPayMentList())})},rejectPayMent:function(e){var t=this,a={payBillId:e};this.$httpServer("/payApply/deny.do",a).then(function(e){console.log(e),200==e.status&&(t.$Message.success("付款申请单已驳回"),t.searchValue="",t.getPayMentList())})},editPayMent:function(e){var t={payment_State:1002,payBillId:e};this.$router.push({name:"paymentaddedit_index",query:t})},deletePayMent:function(e){var t=this,a={payBillId:e};this.$httpServer("/payApply/delete.do",a).then(function(e){console.log(e),200==e.status&&(t.$Message.success("付款申请单已删除"),t.searchValue="",t.getPayMentList())})},changeScene:function(e){this.selectedScene=e,this.getPayMentList()}},watch:{userType:function(e){0==e&&(this.payMentColumns[3].title="订单名称",this.payMentColumns[3].key="contractName")}}}}});