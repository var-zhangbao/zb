webpackJsonp([14],{1087:function(t,e,n){var a=n(1088);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(20)("7094c487",a,!1)},1088:function(t,e,n){e=t.exports=n(19)(void 0),e.push([t.i,'\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-left-50 {\n  margin-left: 50px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.margin-right-20 {\n  margin-right: 20px;\n}\n.padding-bottom-10 {\n  padding-bottom: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.clearfix:after {\n  content: ".";\n  clear: both;\n  display: block;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n.clearfix {\n  zoom: 1;\n}\n.fl {\n  float: left;\n}\n.fr {\n  float: right;\n}\n.file {\n  position: relative;\n  display: inline-block;\n  background: #D0EEFF;\n  border: 1px solid #99D3F5;\n  border-radius: 4px;\n  padding: 4px 12px;\n  overflow: hidden;\n  color: #1E88C7;\n  text-decoration: none;\n  text-indent: 0;\n  line-height: 20px;\n}\n.file input {\n  position: absolute;\n  font-size: 100px;\n  right: 0;\n  top: 0;\n  opacity: 0;\n}\n.file:hover {\n  background: #AADFFD;\n  border-color: #78C3F3;\n  color: #004974;\n  text-decoration: none;\n}\n.my-upload div table tr {\n  font-size: 12px;\n}\n.greyCol {\n  color: #999;\n}\n.expand-row {\n  margin-bottom: 16px;\n  margin-top: 16px;\n  font-size: 12px;\n}\ntextarea.ivu-input {\n  font-size: 12px;\n}\n.soltTitlel {\n  line-height: 2;\n  padding: 0 16px;\n  margin-left: -16px;\n  margin-right: -19px;\n  font-weight: 900;\n  color: #464c5b;\n}\n.soltTitle {\n  line-height: 1;\n  border-bottom: 1px solid #e3e8ee;\n  padding: 17px 16px;\n  margin-left: -16px;\n  margin-right: -19px;\n  font-weight: 900;\n  color: #464c5b;\n}\n.soltTitlel {\n  line-height: 2;\n  padding: 0 16px;\n  margin-left: -16px;\n  margin-right: -19px;\n  font-weight: 900;\n  color: #464c5b;\n}\n',""])},1089:function(t,e,n){t.exports={default:n(1090),__esModule:!0}},1090:function(t,e,n){n(1091),t.exports=n(0).Array.forEach},1091:function(t,e,n){"use strict";var a=n(9),o=n(1092)(0),i=n(1095)([].forEach,!0);a(a.P+a.F*!i,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},1092:function(t,e,n){var a=n(21),o=n(64),i=n(28),r=n(40),l=n(1093);t.exports=function(t,e){var n=1==t,s=2==t,p=3==t,c=4==t,m=6==t,u=5==t||m,y=e||l;return function(e,l,d){for(var f,h,v=i(e),g=o(v),b=a(l,d,3),F=r(g.length),M=0,x=n?y(e,F):s?y(e,0):void 0;F>M;M++)if((u||M in g)&&(f=g[M],h=b(f,M,v),t))if(n)x[M]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return M;case 2:x.push(f)}else if(c)return!1;return m?-1:p||c?c:x}}},1093:function(t,e,n){var a=n(1094);t.exports=function(t,e){return new(a(t))(e)}},1094:function(t,e,n){var a=n(12),o=n(113),i=n(1)("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),a(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},1095:function(t,e,n){"use strict";var a=n(16);t.exports=function(t,e){return!!t&&a(function(){e?t.call(null,function(){},1):t.call(null)})}},1096:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{background:"#eee"}},[n("div",[n("Card",{staticClass:"margin-bottom-10"},[n("Row",{attrs:{align:"middle",type:"flex"}},[n("Col",{attrs:{span:"8"}},[n("p",{staticClass:"soltTitlel"},[t._v(t._s(t.typeSelect?"编辑付款申请":"新增付款申请"))])]),t._v(" "),n("Col",{attrs:{span:"5",offset:"11"}},[n("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){t.savePayMain("0")}}},[t._v("保存")]),t._v(" "),n("Button",{staticClass:"btn",attrs:{type:"ghost"},on:{click:function(e){t.savePayMain("1")}}},[t._v("保存并提交")]),t._v(" "),n("Button",{staticClass:"btn",attrs:{type:"ghost"},on:{click:function(e){t.backlist()}}},[t._v("取消")])],1)],1)],1),t._v(" "),n("Card",{staticClass:"margin-bottom-10",attrs:{bordered:!1}},[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"flag"}}),t._v(" 基本信息")],1),t._v(" "),n("Form",{ref:"paymentForm",attrs:{model:t.paymentForm,rules:t.ruleValidate,"label-position":"top"}},[n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"订单信息",prop:"contractCode"}},[n("Input",{attrs:{readonly:"",icon:"plus-round",placeholder:"请选择订单信息"},on:{"on-focus":function(e){t.contractDig=!0}},model:{value:t.paymentForm.contractName,callback:function(e){t.$set(t.paymentForm,"contractName",e)},expression:"paymentForm.contractName"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"11",offset:"2"}},[n("FormItem",{attrs:{label:"供应商名称",prop:"supplierName"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.supplierName,callback:function(e){t.$set(t.paymentForm,"supplierName",e)},expression:"paymentForm.supplierName"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"订单总金额",prop:"currencyMoney"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.currencyMoney,callback:function(e){t.$set(t.paymentForm,"currencyMoney",e)},expression:"paymentForm.currencyMoney"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"11",offset:"2"}},[n("FormItem",{attrs:{label:"累计申请金额",prop:"payApplyMoneySum"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.payApplyMoneySum,callback:function(e){t.$set(t.paymentForm,"payApplyMoneySum",e)},expression:"paymentForm.payApplyMoneySum"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"累计付款金额",prop:"payedMoneySum"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.payedMoneySum,callback:function(e){t.$set(t.paymentForm,"payedMoneySum",e)},expression:"paymentForm.payedMoneySum"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"11",offset:"2"}},[n("FormItem",{attrs:{label:"累计发票金额",prop:"invoicedMoneySum"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.invoicedMoneySum,callback:function(e){t.$set(t.paymentForm,"invoicedMoneySum",e)},expression:"paymentForm.invoicedMoneySum"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"累计结算金额",prop:"settledMoneySum"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.settledMoneySum,callback:function(e){t.$set(t.paymentForm,"settledMoneySum",e)},expression:"paymentForm.settledMoneySum"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"11",offset:"2"}},[n("FormItem",{attrs:{label:"收款单位",prop:"supplierName"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.supplierName,callback:function(e){t.$set(t.paymentForm,"supplierName",e)},expression:"paymentForm.supplierName"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"结算方式"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.settleType,callback:function(e){t.$set(t.paymentForm,"settleType",e)},expression:"paymentForm.settleType"}})],1)],1)],1)],1),t._v(" "),n("p",{staticClass:"soltTitle margin-bottom-10"},[n("Icon",{attrs:{type:"ios-cloud-upload"}}),t._v(" 付款申请信息")],1),t._v(" "),n("Form",{ref:"paymentForm",attrs:{model:t.paymentForm,rules:t.ruleValidate,"label-position":"top"}},[n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"收款单位开户银行",prop:"bankName"}},[n("Input",{model:{value:t.paymentForm.bankName,callback:function(e){t.$set(t.paymentForm,"bankName",e)},expression:"paymentForm.bankName"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"11",offset:"2"}},[n("FormItem",{attrs:{label:"收款单位银行账户",prop:"bankAccount"}},[n("Input",{model:{value:t.paymentForm.bankAccount,callback:function(e){t.$set(t.paymentForm,"bankAccount",e)},expression:"paymentForm.bankAccount"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"发票号码",prop:"invoiceNo"}},[n("Input",{attrs:{readonly:"",icon:"plus-round",placeholder:"请选择发票"},on:{"on-focus":t.invoice},model:{value:t.paymentForm.invoiceNo,callback:function(e){t.$set(t.paymentForm,"invoiceNo",e)},expression:"paymentForm.invoiceNo"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"11",offset:"2"}},[n("FormItem",{attrs:{label:"发票金额",prop:"invoiceMoney"}},[n("Input",{attrs:{disabled:""},model:{value:t.paymentForm.invoiceMoney,callback:function(e){t.$set(t.paymentForm,"invoiceMoney",e)},expression:"paymentForm.invoiceMoney"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"付款申请金额"}},[n("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,step:1,placeholder:"请输入付款申请金额"},model:{value:t.paymentForm.applyMoney,callback:function(e){t.$set(t.paymentForm,"applyMoney",e)},expression:"paymentForm.applyMoney"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"11"}},[n("FormItem",{attrs:{label:"付款申请说明",prop:"payDesc"}},[n("Input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:t.paymentForm.payDesc,callback:function(e){t.$set(t.paymentForm,"payDesc",e)},expression:"paymentForm.payDesc"}})],1)],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"24"}},[n("p",{staticClass:"soltTitle margin-bottom-10"},[n("Icon",{attrs:{type:"ios-cloud-upload"}}),t._v(" 附件")],1)]),t._v(" "),n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"my-upload"},[n("a",{staticClass:"file",attrs:{href:"javascript:;",disabled:t.flieDisabled},on:{change:function(e){t.uploadFile(e)}}},[t._v("选择文件\n                            "),n("input",{attrs:{type:"file",name:"",id:""}})]),t._v(" "),n("div",[n("table",t._l(t.fileList,function(e,a){return n("tr",[n("td",{staticStyle:{padding:"0 10px"}},[t._v(t._s(a+1))]),t._v(" "),n("td",{staticStyle:{padding:"0 10px"}},[t._v(t._s(e.name))]),t._v(" "),n("td",{staticStyle:{padding:"0 10px"}},[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){t.deleteFile(e)}}},[t._v("删除")])])])}))])])])],1)],1),t._v(" "),n("Modal",{attrs:{title:"订单列表",width:"50%;"},model:{value:t.contractDig,callback:function(e){t.contractDig=e},expression:"contractDig"}},[n("div",{staticStyle:{width:"90%"},attrs:{slot:"header"},slot:"header"},[n("Row",[n("Col",{attrs:{span:12}},[n("AutoComplete",{staticStyle:{width:"300px",float:"left"},attrs:{icon:"ios-search",placeholder:"订单编号/订单名称/供应商名称"},on:{"on-search":t.searchContract},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)],1)],1),t._v(" "),n("div",{staticClass:"contant"},[n("Table",{attrs:{size:"small","highlight-row":"",height:"200",columns:t.contractColumns,data:t.contractList},on:{"on-row-click":t.rowClick}})],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:function(e){t.sureContract()}}},[t._v("确认")]),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:function(e){t.contractDig=!1}}},[t._v("取消")])],1)]),t._v(" "),n("Modal",{attrs:{title:"选择发票",width:"50%"},model:{value:t.invoiceDig,callback:function(e){t.invoiceDig=e},expression:"invoiceDig"}},[n("div",{staticStyle:{width:"90%"},attrs:{slot:"header"},slot:"header"},[n("Row",[n("Col",{attrs:{span:8}},[n("AutoComplete",{staticStyle:{width:"300px",float:"left"},attrs:{icon:"ios-search",placeholder:"发票号码/开票申请单号/开票金额/开票日期"}})],1)],1)],1),t._v(" "),n("div",{staticClass:"contant"},[n("Table",{ref:"selection",attrs:{columns:t.invoiceColumns,data:t.invoiceList,height:"300"},on:{"on-selection-change":t.onSelectChange}})],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:function(e){t.invoiceSure()}}},[t._v("确认")]),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:function(e){t.invoiceDig=!1}}},[t._v("取消")])],1)])],1)])},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};e.default=i},303:function(t,e,n){"use strict";function a(t){p||n(1087)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(586),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);var l=n(1096),s=n.n(l),p=!1,c=n(4),m=a,u=c(i.a,s.a,!1,m,null,null);u.options.__file="src/views/payment/paymentAddEdit.vue",e.default=u.exports},586:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1089),i=a(o),r=n(39),l=a(r),s=n(111),p=a(s),c=n(15),m=a(c);e.default={name:"",data:function(){var t=this,e=function(e,n,a){if(""===n)a(new Error("请输入"+e.valiName));else{/^[\d,]+\.?\d{0,2}$/.test(n)?1==t.payTypeForm.typeId||6==t.payTypeForm.typeId?n>m.default.formatFalNum(t.payTypeForm.invoiceMoney)?a(new Error("付款申请金额不得大于发票金额")):(t.payTypeForm.subApplyMoney=m.default.formatNum(n,2),a()):(console.log(n),console.log(t.paymentForm.currencyMoney),n>m.default.formatFalNum(t.paymentForm.currencyMoney)?a(new Error("付款申请金额不得大于订单金额")):(t.payTypeForm.subApplyMoney=m.default.formatNum(n,2),a())):a(new Error("请输入正确的金额格式")),a()}};return{typeSelect:!1,invoiceDig:!1,contractDig:!1,modal2:!1,modal_loading:!1,flieDisabled:!1,searchValue:"",paymentForm:{contractId:"",contractCode:"",contractName:"",purchaserName:"",currencyMoney:"",contractType:"",currency:"",payApplyMoneySum:"",payedMoneySum:"",settledMoneySum:"",invoicedMoneySum:"",supplierName:"",bankName:"",bankAccount:"",payDesc:"",applyMoney:0,invoiceNo:"",invoiceMoney:"",settleType:""},ruleValidate:{contractCode:[{required:!0,message:"请输入名称",trigger:"change"}],contractName:[{required:!0,message:"请输入编号",trigger:"change"}],bankName:[{required:!0,message:"请输入收款单位开户银行",trigger:"change"}],bankAccount:[{required:!0,message:"请输入收款单位银行账户",trigger:"blur"}],invoiceNo:[{required:!0,message:"请选择发票号码",trigger:"change"}]},material:[],invoiceColumns:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"发票代码",key:"invoiceCode",width:200},{title:"发票号码",key:"invoiceNo",width:200},{title:"发票金额",key:"taxIncludedSum",width:200,render:function(t,e){return t("span",m.default.formatNum(e.row.taxIncludedSum,2))}},{title:"开票日期",key:"invoiceDate",width:200,render:function(t,e){return t("span",m.default.format(e.row.invoiceDate))}},{title:"开票申请单号",key:"noticeNo",width:200}],invoiceList:[],contractColumns:[{type:"index",title:"序号",width:60},{title:"订单编号",key:"contractCode"},{title:"订单名称",key:"contractName"},{title:"供应商名称",key:"supplierName"},{title:"订单金额",key:"currencyMoney",render:function(t,e){return t("span",m.default.formatNum(e.row.currencyMoney,2))}}],contractList:[],payTypeForm:{type:"",typeId:"",subtype:"",subApplyMoney:"",invoiceNo:"",invoiceMoney:"",symbol:""},rulepayTypeForm:{type:[{required:!0,message:"请选择付款类型",trigger:"change"}],subtype:[{required:!0,message:"请选择子类型",trigger:"change"}],invoiceNo:[{required:!0,message:"请选择发票号码",trigger:"change"}],subApplyMoney:[{validator:e,required:!0,trigger:"blur",valiName:"付款申请金额"}]},contractId:"",banklist:[],contractNatureList:[{value:0,label:"普通订单"},{value:1,label:"框架订单"}],currencyList:[{value:0,label:"人民币"},{value:1,label:"美元"},{value:2,label:"欧元"},{value:3,label:"英镑"},{value:4,label:"日元"}],payTypeList:[],payTypeChildList:[],nullMsg:"请选择付款子类型",file:[],deleteList:[],payBillId:"",num:0,digType:!1,fileList:[],input:"",disabled:!1,btnDis:!1,addType:!0,clickIndex:0,selectionInvoice:[],supplierId:""}},mounted:function(){this.init(),this.getContractlist()},methods:{backlist:function(){this.$router.go(-1)},init:function(){switch(this.payBillId=this.$route.query.payBillId,this.$route.query.payment_State.toString()){case"1001":this.typeSelect=!1;break;case"1002":this.typeSelect=!0,this.getPayMainConunt(),this.getFileList()}},getPayMainConunt:function(){var t=this,e={payBillId:this.payBillId};this.$httpServer("/payApply/detail.do",e).then(function(e){t.paymentForm=e.data,t.contractId=e.data.contractId})},getFileList:function(){var t=this,e={payBillId:this.payBillId};this.$httpServer("/payAttach/list.do",e).then(function(e){console.log(e),t.fileList=e.data})},getContractlist:function(){var t=this,e={input:this.input};this.$httpServer("/payApply/getContractList.do",e).then(function(e){console.log(e),""==e.data&&null==e.data||(t.contractList=e.data)})},searchContract:function(){console.log(this.searchValue),this.input=this.searchValue,this.getContractlist()},rowClick:function(t,e){console.log(t),this.contractId=t.contractId,this.paymentForm.contractId=t.contractId,console.log(e)},sureContract:function(){var t=this;this.contractDig=!1,this.$httpServer("/payApply/getContract.do",{contractId:this.contractId}).then(function(e){console.log(e),t.paymentForm.contractId=e.data.contractId,t.paymentForm.contractCode=e.data.contractCode,t.paymentForm.contractName=e.data.contractName,t.paymentForm.purchaserName=e.data.purchaserName,t.paymentForm.currencyMoney=e.data.currencyMoney,t.paymentForm.contractType=e.data.contractType,t.paymentForm.currency=e.data.currency,t.paymentForm.payApplyMoneySum=e.data.payApplyMoneySum,t.paymentForm.payedMoneySum=e.data.payedMoneySum,t.paymentForm.settledMoneySum=e.data.settledMoneySum,t.paymentForm.invoicedMoneySum=e.data.invoicedMoneySum,t.paymentForm.supplierName=e.data.supplierName,t.paymentForm.payDesc=e.data.payDesc,t.paymentForm.applyMoney=e.data.applyMoney,t.paymentForm.invoiceNo=e.data.invoiceNo,t.paymentForm.invoiceMoney=e.data.invoiceMoney,t.paymentForm.settleType=e.data.settleType,t.supplierId=e.data.supplierId,t.purchLists()})},purchLists:function(){var t=this;this.$httpServer("/payApply/getBank.do",{supplierId:this.supplierId}).then(function(e){t.paymentForm.bankName=e.data.bankName,t.paymentForm.bankAccount=e.data.bankAccount,console.log(e)})},invoice:function(){if(""==this.contractId)return void this.$Message.info("请先选择订单信息");this.invoiceDig=!0,this.payTypeForm.subApplyMoney="",this.getInvoicelist()},getInvoicelist:function(){var t=this;this.$httpServer("/payApply/getInvoiceList.do",{contractId:this.contractId}).then(function(e){console.log(e),t.invoiceList=e.data})},onSelectChange:function(t){console.log(t),this.selectionInvoice=t},invoiceSure:function(){this.invoiceDig=!1;for(var t=new Array,e=0,n=0;n<this.selectionInvoice.length;n++)t.push(this.selectionInvoice[n].invoiceNo),e=Number(e)+Number(this.selectionInvoice[n].taxIncludedSum),this.paymentForm.invoiceMoney=e,this.paymentForm.applyMoney=e;this.paymentForm.invoiceNo=t.toString(),console.log(this.paymentForm.invoiceNo)},uploadFile:function(t){t.target.outerHTML=t.target.outerHTML;var e=t.target.files,n=[];e&&e.length&&Array.prototype.push.apply(n,e);for(var a=0;a<n.length;a++)this.file.push(n[a]),console.log(this.file),this.fileList.push(n[a]),console.log(this.fileList)},deleteFile:function(t){var e=this;if(void 0==t.attachId){for(var n=0;n<this.fileList.length;n++)if(t.name==this.fileList[n].name){this.fileList.splice(n,1);break}}else{var a={attachId:t.attachId};this.$httpServer("/payAttach/delete.do",a).then(function(t){200==t.status&&(e.$Message.info("删除成功"),e.getFileList())})}},savePayMain:function(t){var e=this;this.$refs.paymentForm.validate(function(n){if(n){if(e.paymentForm.applyMoney>e.paymentForm.invoiceMoney)return void e.$Message.info("付款申请金额不能大于发票金额");var a="";0==e.typeSelect?a="/payApply/save.do":(a="/payApply/update.do",e.paymentForm.payBillId=e.payBillId),e.paymentForm.payee=e.paymentForm.supplierName;var o=(0,p.default)({},e.paymentForm);console.log(o);for(var i=new FormData,r=0;r<e.file.length;r++)i.append("attaches",e.file[r]);i.append("flag",t),i.append("payStr",(0,l.default)(o)),e.$fdServer(a,i).then(function(t){console.log(t),200==t.status?(e.$Message.info("保存成功"),e.backlist()):e.$Message.error("保存失败")})}else e.$Message.info("请仔细填写基础信息")})}},components:{},watch:{fileList:function(t){t.length>=5?(this.$Message.info("附件上传不得大于5个"),this.flieDisabled=!0):this.flieDisabled=!1},paymentForm:function(t){console.log(t),this.paymentForm.currencyMoney=m.default.formatNum(t.currencyMoney,2),this.paymentForm.payApplyMoneySum=m.default.formatNum(t.payApplyMoneySum,2),this.paymentForm.payedMoneySum=m.default.formatNum(t.payedMoneySum,2),this.paymentForm.invoicedMoneySum=m.default.formatNum(t.invoicedMoneySum,2),this.paymentForm.settledMoneySum=m.default.formatNum(t.settledMoneySum,2)},material:function(t){function e(t){a+=Number(t)}var n=t.map(function(t){var e=t.type.replace(/[^\+\-]/gi,"");return"number"==typeof t.subApplyMoney?e+""+t.subApplyMoney:e+""+m.default.formatFalNum(t.subApplyMoney)});console.log(n);var a=0;(0,i.default)(n,e),this.paymentForm.applyMoney=m.default.formatNum(a,2)},"paymentForm.contractName":function(t){this.addType=""==t}}}}});