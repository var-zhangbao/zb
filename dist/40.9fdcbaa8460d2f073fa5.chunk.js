webpackJsonp([40],{266:function(e,n,t){"use strict";function i(e){m||t(961)}Object.defineProperty(n,"__esModule",{value:!0});var o=t(529),l=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,function(){return o[e]})}(r);var a=t(963),s=t.n(a),m=!1,u=t(1),c=i,p=u(l.a,s.a,!1,c,null,null);p.options.__file="src/views/clearingTicket/component/rules_add.vue",n.default=p.exports},529:function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=t(2),l=(i(o),t(10));i(l);n.default={name:"",data:function(){return{ruleId:"",typeSelsect:!0,formRules:{ruleName:"",companyId:"",companyName:"",haveSalesBill:"",invoiceItemLimit:"",itemMerge:"",invoiceLimitMoney:"",isDisabled:!1},purchli:[],ruleValidate:{ruleName:[{required:!0,message:"规则模板名称不能为空",trigger:"blur"}],haveSalesBill:[{required:!0,message:"请选择销货清单",trigger:"change"}],invoiceItemLimit:[{required:!0,message:"发票明细限制行数请输入小于8的正整数数字",trigger:"blur",pattern:/^(([1-8])|(8))$/}],itemMerge:[{required:!0,message:"请选择相同品类合并",trigger:"change"}],invoiceLimitMoney:[{required:!0,message:"票面限制金额请输入数字",trigger:"blur",pattern:/^[0-9]*$/}],companyName:[{required:!0,message:"请选择模板适用客户",trigger:"change"}]}}},mounted:function(){this.init()},watch:{$route:function(){this.init()}},methods:{init:function(){switch(this.$route.query.ruleState){case 1001:this.purchlist();break;case 1002:this.ruleId=this.$route.query.ruleId,this.purchlist(),this.ruleList()}},purchlist:function(){var e=this;this.$httpServer("/invoiceRule/getSupplierPartners.do",{}).then(function(n){e.purchli=n})},select:function(e){console.log(e),this.formRules.companyId=e.value,this.formRules.companyName=e.label},ruleList:function(){var e=this;this.$httpServer("/invoiceRule/renderUpdatingInvoiceRule.do",{ruleId:this.ruleId}).then(function(n){e.formRules.ruleName=n.invoiceRule.ruleName,e.formRules.haveSalesBill=n.invoiceRule.haveSalesBill,e.formRules.invoiceItemLimit=n.invoiceRule.invoiceItemLimit,e.formRules.itemMerge=n.invoiceRule.itemMerge,e.formRules.invoiceLimitMoney=n.invoiceRule.invoiceLimitMoney,e.formRules.companyId=n.invoiceRule.companyId,e.formRules.companyName=n.invoiceRule.companyName,e.purchli=n.supplierPartners})},saveRule:function(e){var n=this;this.$refs[e].validate(function(e){e?1002==n.$route.query.ruleState?n.$httpServer("/invoiceRule/updateInvoiceRule.do",{ruleId:n.ruleId,ruleName:n.formRules.ruleName,haveSalesBill:n.formRules.haveSalesBill,invoiceItemLimit:n.formRules.invoiceItemLimit,itemMerge:n.formRules.itemMerge,invoiceLimitMoney:n.formRules.invoiceLimitMoney,companyName:n.formRules.companyName,companyId:n.formRules.companyId}).then(function(e){200==e.status?(n.$Message.success("保存成功"),n.backlist()):n.$Message.warning("请仔细填写开票规则信息")}):n.$httpServer("/invoiceRule/addInvoiceRule.do",{ruleName:n.formRules.ruleName,haveSalesBill:n.formRules.haveSalesBill,invoiceItemLimit:n.formRules.invoiceItemLimit,itemMerge:n.formRules.itemMerge,invoiceLimitMoney:n.formRules.invoiceLimitMoney,companyName:n.formRules.companyName,companyId:n.formRules.companyId}).then(function(e){200==e.status?(n.$Message.success("保存成功"),n.backlist()):n.$Message.warning("请仔细填写开票规则信息")}):n.$Message.error("请填写开票规则模板!")})},backlist:function(){this.$router.go(-1)}}}},961:function(e,n,t){var i=t(962);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(18)("4516a690",i,!1)},962:function(e,n,t){n=e.exports=t(17)(void 0),n.push([e.i,'\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-left-50 {\n  margin-left: 50px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.margin-right-20 {\n  margin-right: 20px;\n}\n.padding-bottom-10 {\n  padding-bottom: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.clearfix:after {\n  content: ".";\n  clear: both;\n  display: block;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n.clearfix {\n  zoom: 1;\n}\n.fl {\n  float: left;\n}\n.fr {\n  float: right;\n}\n.file {\n  position: relative;\n  display: inline-block;\n  background: #D0EEFF;\n  border: 1px solid #99D3F5;\n  border-radius: 4px;\n  padding: 4px 12px;\n  overflow: hidden;\n  color: #1E88C7;\n  text-decoration: none;\n  text-indent: 0;\n  line-height: 20px;\n}\n.file input {\n  position: absolute;\n  font-size: 100px;\n  right: 0;\n  top: 0;\n  opacity: 0;\n}\n.file:hover {\n  background: #AADFFD;\n  border-color: #78C3F3;\n  color: #004974;\n  text-decoration: none;\n}\n.my-upload div table tr {\n  font-size: 12px;\n}\n.greyCol {\n  color: #999;\n}\n.expand-row {\n  margin-bottom: 16px;\n  margin-top: 16px;\n  font-size: 12px;\n}\ntextarea.ivu-input {\n  font-size: 12px;\n}\n.soltTitlel {\n  line-height: 2;\n  padding: 0 16px;\n  margin-left: -16px;\n  margin-right: -19px;\n  font-weight: 900;\n  color: #464c5b;\n}\n.soltTitlel {\n  line-height: 2;\n  padding: 0 16px;\n  margin-left: -16px;\n  margin-right: -19px;\n  font-weight: 900;\n  color: #464c5b;\n}\n',""])},963:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("Card",{staticClass:"margin-bottom-10"},[t("Row",{attrs:{align:"middle",type:"flex"}},[t("Col",{attrs:{span:"8"}},[1001==this.$route.query.ruleState?t("p",{staticClass:"soltTitlel"},[e._v("新增开票规则")]):t("p",{staticClass:"soltTitlel"},[e._v("编辑开票规则")])]),e._v(" "),t("Col",{attrs:{span:"5",offset:"11"}},[t("Button",{attrs:{type:"primary"},on:{click:function(n){e.saveRule("formRules")}}},[e._v("保存")]),e._v(" "),t("Button",{attrs:{type:"ghost"},on:{click:function(n){e.backlist()}}},[e._v("取消")])],1)],1)],1),e._v(" "),t("Card",{staticClass:"margin-bottom-10",attrs:{bordered:!1}},[t("p",{attrs:{slot:"title"},slot:"title"},[t("Icon",{attrs:{type:"flag"}}),e._v(" 开票规则")],1),e._v(" "),t("Form",{ref:"formRules",attrs:{model:e.formRules,rules:e.ruleValidate,"label-position":"top"}},[t("Row",[t("Col",{attrs:{span:"11"}},[t("FormItem",{attrs:{label:"规则模板名称",prop:"ruleName"}},[t("Input",{attrs:{placeholder:"规则模板名称"},model:{value:e.formRules.ruleName,callback:function(n){e.$set(e.formRules,"ruleName",n)},expression:"formRules.ruleName"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"11",offset:"2"}},[t("FormItem",{attrs:{label:"是否有销货清单",prop:"haveSalesBill"}},[t("Select",{model:{value:e.formRules.haveSalesBill,callback:function(n){e.$set(e.formRules,"haveSalesBill",n)},expression:"formRules.haveSalesBill"}},[t("Option",{attrs:{value:"是"}},[e._v("是")]),e._v(" "),t("Option",{attrs:{value:"否"}},[e._v("否")])],1)],1)],1)],1),e._v(" "),t("Row",["是"==this.formRules.haveSalesBill?t("Col",{attrs:{span:"11"}},[t("FormItem",{attrs:{label:"发票明细限制行数"}},[t("Input",{attrs:{placeholder:"发票明细限制行数(最多8行)",disabled:""},model:{value:e.formRules.invoiceItemLimit,callback:function(n){e.$set(e.formRules,"invoiceItemLimit",n)},expression:"formRules.invoiceItemLimit"}})],1)],1):t("Col",{attrs:{span:"11"}},[t("FormItem",{attrs:{label:"发票明细限制行数",prop:"invoiceItemLimit"}},[t("Input",{attrs:{placeholder:"发票明细限制行数(最多8行)"},model:{value:e.formRules.invoiceItemLimit,callback:function(n){e.$set(e.formRules,"invoiceItemLimit",n)},expression:"formRules.invoiceItemLimit"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"11",offset:"2"}},[t("FormItem",{attrs:{label:"按相同品类合并",prop:"itemMerge"}},[t("Select",{model:{value:e.formRules.itemMerge,callback:function(n){e.$set(e.formRules,"itemMerge",n)},expression:"formRules.itemMerge"}},[t("Option",{attrs:{value:"是"}},[e._v("是")]),e._v(" "),t("Option",{attrs:{value:"否"}},[e._v("否")])],1)],1)],1)],1),e._v(" "),t("Row",[t("Col",{attrs:{span:"11"}},[t("FormItem",{attrs:{label:"票面限制金额",prop:"invoiceLimitMoney"}},[t("Input",{attrs:{placeholder:"票面限制金额"},model:{value:e.formRules.invoiceLimitMoney,callback:function(n){e.$set(e.formRules,"invoiceLimitMoney",n)},expression:"formRules.invoiceLimitMoney"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"11",offset:"2"}},[t("FormItem",{attrs:{label:"模板适用客户",prop:"companyName"}},[t("Select",{attrs:{"label-in-value":!0},on:{"on-change":e.select},model:{value:e.formRules.companyId,callback:function(n){e.$set(e.formRules,"companyId",n)},expression:"formRules.companyId"}},e._l(e.purchli,function(n){return t("Option",{key:n.companyId,attrs:{value:n.companyId}},[e._v(e._s(n.companyName))])}))],1)],1)],1)],1)],1)],1)},o=[];i._withStripped=!0;var l={render:i,staticRenderFns:o};n.default=l}});