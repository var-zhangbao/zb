webpackJsonp([27],{1118:function(e,t,n){var i=n(1119);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(20)("496517d0",i,!1)},1119:function(e,t,n){t=e.exports=n(19)(void 0),t.push([e.i,'\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-left-50 {\n  margin-left: 50px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.margin-right-20 {\n  margin-right: 20px;\n}\n.padding-bottom-10 {\n  padding-bottom: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.clearfix:after {\n  content: ".";\n  clear: both;\n  display: block;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n.clearfix {\n  zoom: 1;\n}\n.fl {\n  float: left;\n}\n.fr {\n  float: right;\n}\n.file {\n  position: relative;\n  display: inline-block;\n  background: #D0EEFF;\n  border: 1px solid #99D3F5;\n  border-radius: 4px;\n  padding: 4px 12px;\n  overflow: hidden;\n  color: #1E88C7;\n  text-decoration: none;\n  text-indent: 0;\n  line-height: 20px;\n}\n.file input {\n  position: absolute;\n  font-size: 100px;\n  right: 0;\n  top: 0;\n  opacity: 0;\n}\n.file:hover {\n  background: #AADFFD;\n  border-color: #78C3F3;\n  color: #004974;\n  text-decoration: none;\n}\n.my-upload div table tr {\n  font-size: 12px;\n}\n.greyCol {\n  color: #999;\n}\n.expand-row {\n  margin-bottom: 16px;\n  margin-top: 16px;\n  font-size: 12px;\n}\ntextarea.ivu-input {\n  font-size: 12px;\n}\n.soltTitlel {\n  line-height: 2;\n  padding: 0 16px;\n  margin-left: -16px;\n  margin-right: -19px;\n  font-weight: 900;\n  color: #464c5b;\n}\n',""])},1120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",[n("Col",{attrs:{span:"24"}},[n("Card",[n("Row",{staticClass:"clearfix"},[n("Col",{attrs:{span:"4"}},[n("span",{staticStyle:{"padding-right":"10px"}},[e._v("场景")]),e._v(" "),n("Select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{"on-change":e.changeScene},model:{value:e.selectedScene,callback:function(t){e.selectedScene=t},expression:"selectedScene"}},e._l(e.sceneList,function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),n("Col",{attrs:{span:"8",offset:"4"}},[n("Input",{staticStyle:{width:"300px",float:"left"},attrs:{icon:"ios-search",placeholder:"到货验收单号/订单编号/订单名称"},on:{input:e.handleSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1),e._v(" "),n("Row",{staticClass:"margin-top-10 searchable-table-con1 clearfix"},[n("Table",{staticStyle:{width:"100%",float:"left"},attrs:{stripe:"",size:"small",columns:e.columns,data:e.initTable}}),e._v(" "),n("Page",{staticClass:"fr margin-top-10",attrs:{total:e.totalCount,size:"small","show-elevator":"","show-sizer":""},on:{"on-change":e.onChangePage,"on-page-size-change":e.onPageSize}})],1)],1)],1)],1)],1)},a=[];i._withStripped=!0;var r={render:i,staticRenderFns:a};t.default=r},307:function(e,t,n){"use strict";function i(e){c||n(1118)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(594),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var l=n(1120),s=n.n(l),c=!1,u=n(4),h=i,p=u(r.a,s.a,!1,h,null,null);p.options.__file="src/views/workbench/workbenchDH.vue",t.default=p.exports},594:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={name:"searchable-table",data:function(){var e=this;return{sceneList:[{value:"0",label:"待处理"},{value:"1",label:"已处理"}],selectedScene:"0",searchValue:"",columns:[{type:"index",width:60,title:"序号"},{key:"arrivalCheckBillNo",title:"单号",sortable:!0,render:function(t,n){return t("span",[t("a",{style:{},on:{click:function(){e.arrivalDetail(n)}}},n.row.arrivalCheckBillNo)])}},{key:"demanderName",title:"采购商名称",sortable:!0},{key:"contractCode",title:"订单编号"},{key:"contractName",title:"订单名称"},{key:"createDate",title:"日期",sortable:!0,render:function(e,t){return e("span",a.default.format(t.row.createDate))}},{key:"state",title:"状态",width:100,sortable:!0,render:function(e,t){switch(t.row.flag){case"0":switch(t.row.state){case"0":return e("span","待接收");case"1":return e("span","已接收")}break;case"1":switch(t.row.state){case"0":return e("span","待验收");case"2":return e("span","已验收");case"3":return e("span","已拒验")}break;case"2":switch(t.row.state){case"1":return e("span","已发货");case"2":return e("span","已到货");case"3":return e("span","已验收");case"4":return e("span","已拒收");case"5":return e("span","已拒验")}}}},{key:"operation",title:"操作",render:function(t,n){switch(n.row.flag){case"0":switch(n.row.state){case"0":return t("div",[t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.submitFn(n.row.arrivalCheckBillId)}}},"提交"),t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.maintainFn(n.row.arrivalCheckBillId)}}},"维护"),t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.deleteFn(n.row.arrivalCheckBillId)}}},"删除")]);case"1":return"0"==e.selectedScene?t("div",[t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.acceptance(n.row)}}},"验收"),t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.toCheck(n.row.dispatchBillNo)}}},"拒验")]):t("span","")}break;case"1":switch(n.row.state){case"0":return t("div",[t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.submitFny(n.row.arrivalCheckBillId)}}},"提交"),t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.maintainFny(n.row.arrivalCheckBillId)}}},"维护")]);case"2":case"3":return t("span","")}break;case"2":switch(n.row.state){case"1":return t("div",[t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.sureArrival(n.row)}}},"到货"),t("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){e.rejection(n.row.dispatchBillNo)}}},"拒收")])}}}}],totalCount:0,initTable:[],pageSize:10,currPage:1,reason:"",loadingMorn:!1,para:{}}},methods:{init:function(e){var t=this;e?(this.para={currPage:this.currPage,pageSize:this.pageSize,inputParam:this.searchValue,flag:this.selectedScene,module:"DH"},this.para[e.key]=e.order.toUpperCase()):this.para={currPage:this.currPage,pageSize:this.pageSize,inputParam:this.searchValue,flag:this.selectedScene,module:"DH"},this.loadingMorn=!0,this.$httpServer("/workTable/getArrivalCheckList.do",this.para).then(function(e){console.log(e),null==e.result?(t.totalCount=0,t.initTable=[],t.loadingMorn=!1):(t.totalCount=e.result.totalCount,t.initTable=e.result.list,t.loadingMorn=!1)})},changeScene:function(e){this.selectedScene=e,this.init()},handleSearch:function(){this.init()},sureArrival:function(e){var t={arrivalCheckBillId:e.arrivalCheckBillId,dispatchBillNo:e.dispatchBillNo};this.$router.push({name:"newArrival",query:t})},rejection:function(e){var t=this;console.log(e),this.reason="";var n=this;this.$Modal.confirm({render:function(e){return e("Input",{props:{value:t.reason,autofocus:!0,placeholder:"简单填写拒绝原因"},on:{input:function(e){t.reason=e}}})},onOk:function(){n.noServer(e)}})},noServer:function(e){var t=this;this.$httpServer("/workTable/updateBillFinalState.do",{billNo:e,stateNo:"A05",reason:this.reason}).then(function(e){200==e.status&&(t.$Message.success("到货验收单已提交"),t.searchValue="",t.init())})},acceptance:function(e){var t={arrivalCheckBillId:e.arrivalCheckBillId,dispatchBillNo:e.dispatchBillNo};this.$router.push({name:"newAcceptance",query:t})},toCheck:function(e){var t=this;this.reason="";var n=this;this.$Modal.confirm({render:function(e){return e("Input",{props:{value:t.reason,autofocus:!0,placeholder:"简单填写拒绝原因"},on:{input:function(e){t.reason=e}}})},onOk:function(){n.noCheck(e)}})},noCheck:function(e){var t=this;this.$httpServer("/workTable/updateBillFinalState.do",{billNo:e,stateNo:"B06",reason:this.reason}).then(function(e){200==e.status&&(t.$Message.success("到货验收单已提交"),t.searchValue="",t.init())})},arrivalDetail:function(e){console.log(e);var t={};switch(e.row.flag){case"0":t={arrivalCheckBillId:e.row.arrivalCheckBillId},this.$router.push({name:"arrivalDetail",query:t});break;case"1":t={arrivalCheckBillId:e.row.arrivalCheckBillId},this.$router.push({name:"acceptanceDetail",query:t});break;case"2":t={dispatchBillId:e.row.arrivalCheckBillId,sign:e.row.sign},this.$router.push({name:"deliverDetail",query:t})}},onChangePage:function(e){console.log(e),this.currPage=e,this.init()},onPageSize:function(e){console.log(e),this.pageSize=e,this.init()},submitFn:function(e){var t=this;this.$httpServer("/arrivalOfGoods/commitArrivalOfGoods.do",{arrivalCheckBillId:e}).then(function(e){console.log(e),200==e.status&&(t.$Message.success("到货验收单已提交"),t.searchValue="",t.init())})},maintainFn:function(e){var t={arrivalCheckBillId:e};this.$router.push({name:"newArrival",query:t})},deleteFn:function(e){var t=this;this.$httpServer("/arrivalOfGoods/deleteArrivalCheckBill.do",{billId:e}).then(function(e){console.log(e),200==e.status&&(t.$Message.success("到货验收单已删除"),t.searchValue="",t.init())})},submitFny:function(e){var t=this;this.$httpServer("/checkOfGoods/commitCheckOfGoods.do",{arrivalCheckBillId:e}).then(function(e){console.log(e),200==e.status&&(t.$Message.success("到货验收单已提交"),t.searchValue="",t.init())})},maintainFny:function(e){var t={arrivalCheckBillId:e};this.$router.push({name:"newAcceptance",query:t})},deleteFny:function(e){var t=this;this.$httpServer("/checkOfGoods/deleteArrivalCheckBill.do",{arrivalCheckBillId:e}).then(function(e){console.log(e),200==e.status&&(t.$Message.success("到货验收单已删除"),t.searchValue="",t.init())})},sort:function(e){console.log(e),this.init(e)}},mounted:function(){a.default.isEmptyObject(this.$route.query.content)||(this.searchValue=this.$route.query.content.deliveryBillNo),this.init()}}}});